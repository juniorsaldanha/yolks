{
    "_comment": "Fixed Hytale Egg - Resolves OAuth visibility and permission issues",
    "meta": {
        "version": "PTDL_v2"
    },
    "exported_at": "2026-01-22T00:00:00+00:00",
    "name": "Hytale",
    "author": "umsaldanha@gmail.com",
    "description": "Hytale dedicated server with fixed OAuth authentication visibility and proper file permissions.\n\nFixes:\n- OAuth URL now visible in Pterodactyl console\n- Credentials file permission issue resolved\n\nCredits: Based on official pterodactyl/yolks hytale image",
    "features": [
        "java_version"
    ],
    "docker_images": {
        "Local - hytale-fixed": "hytale-fixed:latest"
    },
    "file_denylist": [],
    "startup": "java $( ((USE_AOT_CACHE)) && printf %s \"-XX:AOTCache=HytaleServer.aot\" ) -Xms128M $( ((SERVER_MEMORY)) && printf %s \"-Xmx${SERVER_MEMORY}M\" ) -jar HytaleServer.jar $( ((HYTALE_ALLOW_OP)) && printf %s \"--allow-op\" ) $( ((HYTALE_ACCEPT_EARLY_PLUGINS)) && printf %s \"--accept-early-plugins\" ) $( ((DISABLE_SENTRY)) && printf %s \"--disable-sentry\" ) --auth-mode ${HYTALE_AUTH_MODE} --assets ../Assets.zip --bind 0.0.0.0:${SERVER_PORT}",
    "config": {
        "files": "{}",
        "startup": "{\r\n    \"done\": \"Hytale Server Booted\"\r\n}",
        "logs": "{}",
        "stop": "/stop"
    },
    "scripts": {
        "installation": {
            "script": "#!/bin/bash\nset -e\n\nDOWNLOAD_URL=\"https://downloader.hytale.com/hytale-downloader.zip\"\nDOWNLOAD_FILE=\"hytale-downloader.zip\"\n\necho \"===========================================\"\necho \"  HYTALE SERVER INSTALLATION\"\necho \"===========================================\"\necho \"\"\n\n# Install required dependencies\necho \"Installing dependencies...\"\napt-get update\napt-get install -y curl unzip\necho \"\"\n\ncd /mnt/server\n\n# Create the hytale-downloader directory\nmkdir -p hytale-downloader\n\necho \"Downloading Hytale Downloader CLI...\"\ncurl -L -o \"${DOWNLOAD_FILE}\" \"${DOWNLOAD_URL}\"\n\nif [ $? -ne 0 ]; then\n    echo \"Error: Failed to download ${DOWNLOAD_URL}\"\n    exit 1\nfi\n\necho \"Extracting ${DOWNLOAD_FILE}...\"\nunzip -o \"${DOWNLOAD_FILE}\"\n\nif [ $? -ne 0 ]; then\n    echo \"Error: Failed to extract ${DOWNLOAD_FILE}\"\n    exit 1\nfi\n\n# Move binaries to the hytale-downloader directory\nmv -f hytale-downloader-linux-amd64 hytale-downloader/ 2>/dev/null || true\nmv -f hytale-downloader-windows-amd64.exe hytale-downloader/ 2>/dev/null || true\n\n# Create symlink for compatibility with different naming conventions\nln -sf hytale-downloader-linux-amd64 hytale-downloader/hytale-downloader-linux 2>/dev/null || true\n\nchmod +x hytale-downloader/hytale-downloader-linux-amd64\nchmod +x hytale-downloader/hytale-downloader-linux 2>/dev/null || true\n\n# Cleanup\nrm -f \"${DOWNLOAD_FILE}\" QUICKSTART.md\n\n# Verify installation - just check file exists, don't run version check as it may hang\necho \"\"\necho \"Verifying Hytale Downloader installation...\"\nif [ -x ./hytale-downloader/hytale-downloader-linux-amd64 ]; then\n    echo \"Hytale Downloader binary found and executable.\"\nelse\n    echo \"ERROR: Hytale Downloader binary not found or not executable!\"\n    exit 1\nfi\n\n# Ensure proper permissions for the container user\nchmod -R 755 /mnt/server\nchown -R root:root /mnt/server 2>/dev/null || true\n\necho \"\"\necho \"===========================================\"\necho \"  INSTALLATION COMPLETE\"\necho \"===========================================\"\necho \"\"\necho \"IMPORTANT: On first start, you will need to authenticate.\"\necho \"Watch the console for the OAuth URL and authorization code.\"\necho \"\"",
            "container": "ghcr.io/pterodactyl/installers:debian",
            "entrypoint": "bash"
        }
    },
    "variables": [
        {
            "name": "Accept Early Plugins",
            "description": "Hytale warns that loading early plugins is unsupported and may cause stability issues.",
            "env_variable": "HYTALE_ACCEPT_EARLY_PLUGINS",
            "default_value": "0",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|boolean",
            "field_type": "text"
        },
        {
            "name": "Auth Mode",
            "description": "Authentication mode.",
            "env_variable": "HYTALE_AUTH_MODE",
            "default_value": "authenticated",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:authenticated,offline",
            "field_type": "text"
        },
        {
            "name": "Patchline",
            "description": "The branch of Hytale to install.",
            "env_variable": "HYTALE_PATCHLINE",
            "default_value": "release",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:release,pre-release",
            "field_type": "text"
        },
        {
            "name": "Disable Sentry",
            "description": "Hytale uses Sentry to track crashes. Disable Sentry during active plugin development.",
            "env_variable": "DISABLE_SENTRY",
            "default_value": "0",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|boolean",
            "field_type": "text"
        },
        {
            "name": "Use Ahead-of-Time Cache",
            "description": "Hytale provides a pre-trained AOT Java cache which can significantly improve boot times.",
            "env_variable": "USE_AOT_CACHE",
            "default_value": "1",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|boolean",
            "field_type": "text"
        },
        {
            "name": "Allow Operators",
            "description": "Allow operators to use admin commands.",
            "env_variable": "HYTALE_ALLOW_OP",
            "default_value": "0",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|boolean",
            "field_type": "text"
        },
        {
            "name": "Install Source Query Plugin",
            "description": "Installs the Source Query plugin, so that your server responds to Source Query A2S requests (player count, server name, etc.)",
            "env_variable": "INSTALL_SOURCEQUERY_PLUGIN",
            "default_value": "1",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|boolean",
            "field_type": "text"
        },
        {
            "name": "Source Query Port",
            "description": "The port that the Source Query plugin will use to respond to A2S requests. This should be different from the main server port. Defaults to the game port + 1.",
            "env_variable": "QUERY_PORT",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|integer|between:1,65535",
            "field_type": "text"
        },
        {
            "name": "Server Session Token",
            "description": "Optional: Pre-configured session token for GSP providers. Leave empty for OAuth authentication.",
            "env_variable": "HYTALE_SERVER_SESSION_TOKEN",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string",
            "field_type": "text"
        },
        {
            "name": "Max View Radius",
            "description": "Maximum view radius for players.",
            "env_variable": "HYTALE_MAX_VIEW_RADIUS",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|integer",
            "field_type": "text"
        },
        {
            "name": "Max Players",
            "description": "Maximum number of players allowed on the server.",
            "env_variable": "HYTALE_MAX_PLAYERS",
            "default_value": "10",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|integer|min:1",
            "field_type": "text"
        },
        {
            "name": "Game Mode",
            "description": "The game mode for the server.",
            "env_variable": "HYTALE_GAME_MODE",
            "default_value": "Adventure",
            "user_viewable": true,
            "user_editable": true,
            "rules": "required|string|in:Adventure,Creative",
            "field_type": "text"
        },
        {
            "name": "Server Password",
            "description": "Password required to join the server. Leave empty for no password.",
            "env_variable": "HYTALE_PASSWORD",
            "default_value": "",
            "user_viewable": true,
            "user_editable": true,
            "rules": "nullable|string",
            "field_type": "text"
        }
    ]
}
